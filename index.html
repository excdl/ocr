<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>OCR 測試</title>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.3.1/dist/tesseract.min.js"></script>
</head>
<body>
<h2>簡單 OCR 測試</h2>
<input type="file" id="fileInput" accept="image/*">
<pre id="result">辨識結果會顯示在這裡</pre>

<script>
const resultPre = document.getElementById("result");
let workerReady = false;
let worker;

// 初始化 Tesseract
async function initTesseract() {
    try {
        worker = Tesseract.createWorker({
            logger: m => console.log(m) // 可以看進度
        });
        await worker.load();
        await worker.loadLanguage('eng'); // 先只載入英文測試
        await worker.initialize('eng');
        workerReady = true;
        resultPre.innerText = "Tesseract 初始化完成 ✅";
    } catch (e) {
        console.error("Tesseract 初始化失敗:", e);
        resultPre.innerText = "Tesseract 初始化失敗 ❌";
    }
}

// 處理上傳圖片
document.getElementById("fileInput").onchange = async e => {
    if (!workerReady) return alert("Tesseract 還沒準備好");
    const file = e.target.files[0];
    const img = new Image();
    img.onload = async () => {
        const canvas = document.createElement('canvas');
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0);
        try {
            const { data: { text } } = await worker.recognize(canvas);
            resultPre.innerText = text;
        } catch (err) {
            console.error("OCR 失敗:", err);
            resultPre.innerText = "OCR 失敗 ❌";
        }
    };
    img.src = URL.createObjectURL(file);
};

// 開始初始化
initTesseract();
</script>
</body>
</html>
















































